plugins {
  id 'groovy'
  id 'application'
  id 'edu.sc.seis.launch4j' version '2.3.0'
}

ext {
  mainClass = 'com.github.arminha.jenkinstray.Main'
}
mainClassName = mainClass

repositories {
   mavenCentral()
}

dependencies {
  implementation 'org.codehaus.groovy:groovy:2.4.12'
  implementation 'com.fasterxml.jackson.core:jackson-databind:2.8.9'
  implementation 'org.apache.httpcomponents:httpclient:4.5.3'
  implementation 'com.moandjiezana.toml:toml4j:0.7.1'
  testImplementation('org.spockframework:spock-core:1.0-groovy-2.4') {
    exclude module: 'groovy-all'
  }
}

launch4j {
  mainClassName = mainClass
  dontWrapJar = true
  // add dependencies to classpath
  copyConfigurable = sourceSets.main.runtimeClasspath.filter { it.name.endsWith('.jar') }
}

distributions {
  main {
    contents {
      from(tasks.createExe.outputs) {
        include '*.exe'
      }
    }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '4.0'
}
